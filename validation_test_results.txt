============================= test session starts ==============================
platform linux -- Python 3.11.12, pytest-8.3.5, pluggy-1.5.0 -- /home/rationallyprime/CascadeProjects/PSA/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/rationallyprime/CascadeProjects/PSA
configfile: pyproject.toml
plugins: typeguard-4.4.2
collecting ... collected 8 items

tests/test_client_fields.py::test_fields_parameter 
-------------------------------- live log call ---------------------------------
INFO     tests.test_client_fields:test_client_fields.py:49 TEST 1: Testing fields parameter
INFO     fabric_api.client:client.py:271 Reached maximum page limit of 1. Stopping.
INFO     fabric_api.client:client.py:305 Total agreements retrieved from /finance/agreements: 2
INFO     tests.test_client_fields:test_client_fields.py:72 Retrieved 2 agreements with fields=id,name
INFO     tests.test_client_fields:test_client_fields.py:73 First agreement fields: ['id', 'name']
INFO     tests.test_client_fields:test_client_fields.py:74 ✅ Fields parameter was successfully processed
PASSED                                                                   [ 12%]
tests/test_client_fields.py::test_conditions_parameter 
-------------------------------- live log call ---------------------------------
INFO     tests.test_client_fields:test_client_fields.py:78 TEST 2: Testing conditions parameter
INFO     fabric_api.client:client.py:271 Reached maximum page limit of 1. Stopping.
INFO     fabric_api.client:client.py:305 Total agreements retrieved from /finance/agreements: 2
INFO     tests.test_client_fields:test_client_fields.py:95 Retrieved 2 agreements with conditions='cancelledFlag=false'
INFO     tests.test_client_fields:test_client_fields.py:96 First agreement id: 3
INFO     tests.test_client_fields:test_client_fields.py:97 ✅ Conditions parameter was successfully processed
PASSED                                                                   [ 25%]
tests/test_client_fields.py::test_extract_entity_with_validation 
-------------------------------- live log call ---------------------------------
INFO     tests.test_client_fields:test_client_fields.py:101 TEST 3: Testing agreement extraction with model validation
INFO     fabric_api.client:client.py:271 Reached maximum page limit of 2. Stopping.
INFO     fabric_api.client:client.py:305 Total agreements retrieved from /finance/agreements: 20
INFO     fabric_api.extract.generic:generic.py:105 Successfully fetched 20 raw Agreement records
WARNING  fabric_api.extract._common:_common.py:46 Validation failed for Agreement ID 19
INFO     fabric_api.extract._common:_common.py:55 Validated 19 of 20 Agreement records
WARNING  fabric_api.extract._common:_common.py:57 Found 1 validation errors in Agreement data
INFO     tests.test_client_fields:test_client_fields.py:117 Agreement ID: 3, Name: Any name
INFO     tests.test_client_fields:test_client_fields.py:118 Company: XYZ Test Company
INFO     tests.test_client_fields:test_client_fields.py:119 Type: Tímapottur 
INFO     tests.test_client_fields:test_client_fields.py:117 Agreement ID: 5, Name: Hýsing búnaðar
INFO     tests.test_client_fields:test_client_fields.py:118 Company: Samvirkni ehf
INFO     tests.test_client_fields:test_client_fields.py:119 Type: zHýsing búnaðar
INFO     tests.test_client_fields:test_client_fields.py:117 Agreement ID: 6, Name: Afritunarþjónusta
INFO     tests.test_client_fields:test_client_fields.py:118 Company: Minjasafnið á Akureyri
INFO     tests.test_client_fields:test_client_fields.py:119 Type: zAfritunarþjónusta
INFO     tests.test_client_fields:test_client_fields.py:122 Retrieved and validated 19 agreements
INFO     tests.test_client_fields:test_client_fields.py:123 Validation errors: 1
INFO     tests.test_client_fields:test_client_fields.py:126 First error: [{'type': 'dict_type', 'loc': ('customFields', 0, 'value'), 'msg': 'Input should be a valid dictionary', 'input': 'S0708', 'url': 'https://errors.pydantic.dev/2.11/v/dict_type'}]
INFO     tests.test_client_fields:test_client_fields.py:128 ✅ Agreement validation was successful
PASSED                                                                   [ 37%]
tests/test_client_fields.py::test_time_entry_extraction 
-------------------------------- live log call ---------------------------------
INFO     tests.test_client_fields:test_client_fields.py:132 TEST 4: Testing time entry extraction with model validation
INFO     fabric_api.client:client.py:271 Reached maximum page limit of 2. Stopping.
INFO     fabric_api.client:client.py:305 Total timeentrys retrieved from /time/entries: 20
INFO     fabric_api.extract.generic:generic.py:105 Successfully fetched 20 raw TimeEntry records
INFO     fabric_api.extract._common:_common.py:55 Validated 20 of 20 TimeEntry records
INFO     tests.test_client_fields:test_client_fields.py:154 Time Entry ID: 1
INFO     tests.test_client_fields:test_client_fields.py:155 Time Start: 2018-05-05 14:00:00+00:00
INFO     tests.test_client_fields:test_client_fields.py:156 Member: Jón Kristinn Ragnarsson
INFO     tests.test_client_fields:test_client_fields.py:157 Company: Þekking
INFO     tests.test_client_fields:test_client_fields.py:154 Time Entry ID: 2
INFO     tests.test_client_fields:test_client_fields.py:155 Time Start: 2018-05-06 16:00:00+00:00
INFO     tests.test_client_fields:test_client_fields.py:156 Member: Jón Kristinn Ragnarsson
INFO     tests.test_client_fields:test_client_fields.py:157 Company: Þekking
INFO     tests.test_client_fields:test_client_fields.py:154 Time Entry ID: 4
INFO     tests.test_client_fields:test_client_fields.py:155 Time Start: 2018-05-07 10:30:00+00:00
INFO     tests.test_client_fields:test_client_fields.py:156 Member: Hallur Gunnarsson
INFO     tests.test_client_fields:test_client_fields.py:157 Company: Þekking
INFO     tests.test_client_fields:test_client_fields.py:159 Retrieved and validated 20 time entries
INFO     tests.test_client_fields:test_client_fields.py:161 Validation errors: 0
INFO     tests.test_client_fields:test_client_fields.py:166 ✅ Time entry validation was successful
PASSED                                                                   [ 50%]
tests/test_client_fields.py::test_expense_entry_validation 
-------------------------------- live log call ---------------------------------
INFO     tests.test_client_fields:test_client_fields.py:170 TEST 5: Testing expense entry extraction with model validation
INFO     fabric_api.client:client.py:271 Reached maximum page limit of 2. Stopping.
INFO     fabric_api.client:client.py:305 Total expenseentrys retrieved from /expense/entries: 20
INFO     fabric_api.extract.generic:generic.py:105 Successfully fetched 20 raw ExpenseEntry records
INFO     fabric_api.extract._common:_common.py:55 Validated 20 of 20 ExpenseEntry records
INFO     tests.test_client_fields:test_client_fields.py:192 Expense Entry ID: 1
INFO     tests.test_client_fields:test_client_fields.py:193 Date: 2018-08-21 00:00:00+00:00
INFO     tests.test_client_fields:test_client_fields.py:194 Amount: 35060.0
INFO     tests.test_client_fields:test_client_fields.py:195 Member: Tryggvi R. Jónsson
INFO     tests.test_client_fields:test_client_fields.py:192 Expense Entry ID: 2
INFO     tests.test_client_fields:test_client_fields.py:193 Date: 2018-09-10 00:00:00+00:00
INFO     tests.test_client_fields:test_client_fields.py:194 Amount: 0.0
INFO     tests.test_client_fields:test_client_fields.py:195 Member: Jón Kristinn Ragnarsson
INFO     tests.test_client_fields:test_client_fields.py:192 Expense Entry ID: 3
INFO     tests.test_client_fields:test_client_fields.py:193 Date: 2018-09-26 00:00:00+00:00
INFO     tests.test_client_fields:test_client_fields.py:194 Amount: 1020.0
INFO     tests.test_client_fields:test_client_fields.py:195 Member: Jón Kristinn Ragnarsson
INFO     tests.test_client_fields:test_client_fields.py:197 Retrieved and validated 20 expense entries
INFO     tests.test_client_fields:test_client_fields.py:199 Validation errors: 0
INFO     tests.test_client_fields:test_client_fields.py:204 ✅ Expense entry validation was successful
PASSED                                                                   [ 62%]
tests/test_client_fields.py::test_invoice_validation 
-------------------------------- live log call ---------------------------------
INFO     tests.test_client_fields:test_client_fields.py:208 TEST 6: Testing invoice extraction with model validation
INFO     fabric_api.client:client.py:271 Reached maximum page limit of 2. Stopping.
INFO     fabric_api.client:client.py:305 Total postedinvoices retrieved from /finance/invoices: 20
INFO     fabric_api.extract.generic:generic.py:105 Successfully fetched 20 raw PostedInvoice records
INFO     fabric_api.extract._common:_common.py:55 Validated 20 of 20 Invoice records
INFO     tests.test_client_fields:test_client_fields.py:230 Invoice ID: 2
INFO     tests.test_client_fields:test_client_fields.py:231 Invoice Number: 1001
INFO     tests.test_client_fields:test_client_fields.py:232 Type: Standard
INFO     tests.test_client_fields:test_client_fields.py:233 Company: Bæjarsjóður Garðabæjar
INFO     tests.test_client_fields:test_client_fields.py:230 Invoice ID: 5
INFO     tests.test_client_fields:test_client_fields.py:231 Invoice Number: 1004
INFO     tests.test_client_fields:test_client_fields.py:232 Type: Agreement
INFO     tests.test_client_fields:test_client_fields.py:233 Company: XYZ Test Company
INFO     tests.test_client_fields:test_client_fields.py:230 Invoice ID: 6
INFO     tests.test_client_fields:test_client_fields.py:231 Invoice Number: 1005
INFO     tests.test_client_fields:test_client_fields.py:232 Type: Agreement
INFO     tests.test_client_fields:test_client_fields.py:233 Company: XYZ Test Company
INFO     tests.test_client_fields:test_client_fields.py:235 Retrieved and validated 20 invoices
INFO     tests.test_client_fields:test_client_fields.py:237 Validation errors: 0
INFO     tests.test_client_fields:test_client_fields.py:242 ✅ Invoice validation was successful
PASSED                                                                   [ 75%]
tests/test_client_fields.py::test_product_validation 
-------------------------------- live log call ---------------------------------
INFO     tests.test_client_fields:test_client_fields.py:246 TEST 7: Testing product extraction with model validation
INFO     fabric_api.client:client.py:271 Reached maximum page limit of 2. Stopping.
INFO     fabric_api.client:client.py:305 Total productitems retrieved from /procurement/products: 20
INFO     fabric_api.extract.generic:generic.py:105 Successfully fetched 20 raw ProductItem records
INFO     fabric_api.extract._common:_common.py:55 Validated 20 of 20 ProductItem records
INFO     tests.test_client_fields:test_client_fields.py:268 Product ID: 4
INFO     tests.test_client_fields:test_client_fields.py:270 Catalog Item: None
INFO     tests.test_client_fields:test_client_fields.py:271 Price: 0.0
INFO     tests.test_client_fields:test_client_fields.py:272 Quantity: 1.0
INFO     tests.test_client_fields:test_client_fields.py:268 Product ID: 10
INFO     tests.test_client_fields:test_client_fields.py:270 Catalog Item: None
INFO     tests.test_client_fields:test_client_fields.py:271 Price: 3180000.0
INFO     tests.test_client_fields:test_client_fields.py:272 Quantity: 1.0
INFO     tests.test_client_fields:test_client_fields.py:268 Product ID: 21
INFO     tests.test_client_fields:test_client_fields.py:270 Catalog Item: None
INFO     tests.test_client_fields:test_client_fields.py:271 Price: 4096.0
INFO     tests.test_client_fields:test_client_fields.py:272 Quantity: 0.5
INFO     tests.test_client_fields:test_client_fields.py:274 Retrieved and validated 20 product items
INFO     tests.test_client_fields:test_client_fields.py:276 Validation errors: 0
INFO     tests.test_client_fields:test_client_fields.py:281 ✅ Product validation was successful
PASSED                                                                   [ 87%]
tests/test_client_fields.py::test_combined_parameters 
-------------------------------- live log call ---------------------------------
INFO     tests.test_client_fields:test_client_fields.py:285 TEST 8: Testing combination of multiple parameters
INFO     fabric_api.client:client.py:271 Reached maximum page limit of 1. Stopping.
INFO     fabric_api.client:client.py:305 Total agreements retrieved from /finance/agreements: 5
INFO     tests.test_client_fields:test_client_fields.py:309 Retrieved 5 agreements with combined parameters
INFO     tests.test_client_fields:test_client_fields.py:310 First agreement fields: ['id', 'name', 'type']
INFO     tests.test_client_fields:test_client_fields.py:311 ✅ Combined parameters were successfully processed
PASSED                                                                   [100%]

============================== 8 passed in 7.02s ===============================
